( 9/41) Installing libattr (2.5.2-r2)
(10/41) Installing skalibs-libs (2.14.4.0-r0)
(11/41) Installing utmps-libs (0.1.3.1-r0)
(12/41) Installing coreutils (9.8-r1)
(13/41) Installing libstdc++-dev (15.2.0-r2)
(14/41) Installing jansson (2.14.1-r0)
(15/41) Installing zstd-libs (1.5.7-r2)
(16/41) Installing binutils (2.45.1-r0)
(17/41) Installing libgomp (15.2.0-r2)
(18/41) Installing libatomic (15.2.0-r2)
(19/41) Installing gmp (6.3.0-r4)
(20/41) Installing isl26 (0.26-r1)
(21/41) Installing mpfr4 (4.2.2-r0)
(22/41) Installing mpc1 (1.3.1-r1)
(23/41) Installing gcc (15.2.0-r2)
(24/41) Installing musl-dev (1.2.5-r21)
(25/41) Installing g++ (15.2.0-r2)
(26/41) Installing musl-obstack (1.2.3-r2)
(27/41) Installing libucontext (1.3.3-r0)
(28/41) Installing gcompat (1.1.0-r4)
(29/41) Installing make (4.4.1-r3)
(30/41) Installing libbz2 (1.0.8-r6)
(31/41) Installing libexpat (2.7.3-r0)
(32/41) Installing libffi (3.5.2-r0)
(33/41) Installing gdbm (1.26-r0)
(34/41) Installing xz-libs (5.8.2-r0)
(35/41) Installing mpdecimal (4.0.1-r0)
(36/41) Installing libpanelw (6.5_p20251123-r0)
(37/41) Installing sqlite-libs (3.51.2-r0)
(38/41) Installing python3 (3.12.12-r0)
(39/41) Installing python3-pycache-pyc0 (3.12.12-r0)
(40/41) Installing pyc (3.12.12-r0)
(41/41) Installing python3-pyc (3.12.12-r0)
Executing busybox-1.37.0-r30.trigger
OK: 304.0 MiB in 59 packages
Removing intermediate container ef341523fcae
 ---> c6490c337261
Step 6/31 : WORKDIR /app
 ---> Running in b5d754c51524
Removing intermediate container b5d754c51524
 ---> 137473f36de1
Step 7/31 : COPY package.json package-lock.json* ./
 ---> 614dc0cda2b9
Step 8/31 : RUN npm ci
 ---> Running in cad87b534684
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead

added 429 packages, and audited 430 packages in 2m

158 packages are looking for funding
  run `npm fund` for details

1 moderate severity vulnerability

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.8.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.8.0
npm notice To update run: npm install -g npm@11.8.0
npm notice
Removing intermediate container cad87b534684
 ---> 9cac7d75749e
Step 9/31 : FROM base AS builder
 ---> 458b0b7c1c60
Step 10/31 : WORKDIR /app
 ---> Running in a402ab7cdf67
Removing intermediate container a402ab7cdf67
 ---> bdce6a3aec0d
Step 11/31 : COPY --from=deps /app/node_modules ./node_modules
 ---> b468ed321a6c
Step 12/31 : COPY . .
 ---> a0dc1d1d3ea3
Step 13/31 : ENV NEXT_TELEMETRY_DISABLED 1
 ---> Running in 5e5abc55485e
Removing intermediate container 5e5abc55485e
 ---> ac9d3b68c964
Step 14/31 : ARG BUILD_NODE_OPTIONS=--max-old-space-size=2048
 ---> Running in fae6ce903823
Removing intermediate container fae6ce903823
 ---> d19041ec0f8e
Step 15/31 : ENV NODE_OPTIONS=${BUILD_NODE_OPTIONS}
 ---> Running in 8e6d668a70cd
Removing intermediate container 8e6d668a70cd
 ---> a7a98c0cba44
Step 16/31 : RUN chmod +x node_modules/.bin/*
 ---> Running in bb72daf80239
Removing intermediate container bb72daf80239
 ---> 43d606257e1e
Step 17/31 : RUN npm run build
 ---> Running in 3c3186d74eaa

> medical-agent@0.1.0 build
> next build

▲ Next.js 16.1.4 (Turbopack)

  Creating an optimized production build ...
✓ Compiled successfully in 5.2s
  Running TypeScript ...
Failed to compile.

./src/app/actions.ts:278:3
Type error: Type '{ consultation: { id: number; patient_id: string; status: "pending" | "paid" | "ended"; fee_cents: number; token: string; trigger: "ai" | "manual"; created_at: string; paid_at: string | null; ended_at: string | null; }; patient: { ...; }; }[]' is not assignable to type '{ consultation: DoctorConsultation; patient: Patient; }[]'.
  Type '{ consultation: { id: number; patient_id: string; status: "pending" | "paid" | "ended"; fee_cents: number; token: string; trigger: "ai" | "manual"; created_at: string; paid_at: string | null; ended_at: string | null; }; patient: { ...; }; }' is not assignable to type '{ consultation: DoctorConsultation; patient: Patient; }'.
    The types of 'patient.age' are incompatible between these types.
      Type 'number | null' is not assignable to type 'number'.
        Type 'null' is not assignable to type 'number'.

  276 |     .all() as PaidDoctorConsultRow[];
  277 |
> 278 |   return rows.map((r) => ({
      |   ^
  279 |     consultation: {
  280 |       id: r.c_id,
  281 |       patient_id: r.c_patient_id,
Next.js build worker exited with code: 1 and signal: null
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.8.0
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.8.0
npm notice To update run: npm install -g npm@11.8.0
npm notice
The command '/bin/sh -c npm run build' returned a non-zero code: 1
(base) [root@iZbp19eic8rmot67euvzuwZ Medical-Agent]# 